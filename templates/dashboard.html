<!DOCTYPE html>
<html>
<head>
    <title>Labor Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .sidebar { float: left; width: 200px; }
        .sidebar button { display: block; width: 100%; margin: 5px 0; padding: 10px; }
        .content { margin-left: 220px; }
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #333; padding: 8px; text-align: left; }
        th { background: #333; color: #fff; }
        .reminder { background: #fff3cd; padding: 10px; margin-bottom: 10px; }
        .form-container { margin-top: 20px; padding: 10px; border: 1px solid #ccc; }
        .form-container input { margin: 5px 0; padding: 5px; width: 100%; }
    </style>
</head>
<body>

<div class="sidebar">
    <button onclick="window.location='{{ url_for('dashboard') }}'">All Companies</button>
    {% for comp in companies %}
        <button onclick="window.location='{{ url_for('dashboard', company=comp) }}'">{{ comp }}</button>
    {% endfor %}
</div>

<div class="content">
    <h2>All Employees{% if selected_company %} - {{ selected_company }}{% endif %}</h2>

    {% if reminders %}
    <div class="reminder">
        {% for r in reminders %}
            {{ r.Name }} ({{ r.Position }}) expires in {{ r.DaysLeft }} days ({{ r.Expiry }})<br>
        {% endfor %}
    </div>
    {% endif %}

    {% if selected_company %}
    <div class="form-container">
        <h3>Add Employee to {{ selected_company }}</h3>
        <form method="POST" action="{{ url_for('add_employee_route') }}">
            <input type="hidden" name="company" value="{{ selected_company }}">
            <input type="text" name="name" placeholder="Name" required>
            <input type="text" name="position" placeholder="Position" required>
            <input type="date" name="expiry" placeholder="Expiry Date" required>
            <input type="text" name="status" placeholder="Status" required>
            <input type="email" name="email" placeholder="Email">
            <input type="text" name="whatsapp" placeholder="WhatsApp">
            <input type="submit" value="Add Employee">
        </form>
    </div>
    {% endif %}

    <table>
        <tr>
            <th>Company</th>
            <th>Name</th>
            <th>Position</th>
            <th>Expiry</th>
            <th>Status</th>
            <th>Email</th>
            <th>WhatsApp</th>
        </tr>
        {% for emp in employees %}
        <tr>
            <td>{{ emp.Company }}</td>
            <td>{{ emp.Name }}</td>
            <td>{{ emp.Position }}</td>
            <td>{{ emp.Expiry }}</td>
            <td>{{ emp.Status }}</td>
            <td>{{ emp.Email }}</td>
            <td>{{ emp.WhatsApp }}</td>
        </tr>
        {% endfor %}
    </table>

    {% if selected_company and not employees %}
        <p>No employees found for {{ selected_company }}.</p>
    {% endif %}
</div>

</body>
</html>
